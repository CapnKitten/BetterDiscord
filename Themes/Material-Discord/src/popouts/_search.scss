@use '../classes' as *;
@use '../mixins' as *;

/*
 *
 *  SEARCH POPOUT
 *
 */

#{ $searchPopout } {
	max-height: 85vh;
	@include popout-format(true);
	padding: var(--space-8);
	border: none;
	overflow-y: auto;
	transform: translate(0, -4px);
	animation: top-pop-out 400ms var(--default-animation);

    #{ $searchPopoutHeader } {
		margin: -40px 0 8px;
        padding: 8px 0;
        color: var(--interactive-text-default);
		font-weight: 500;
        @include remove-caps(16px);
    }
}

#{ $searchPopoutResultsGroup } {
	margin: 40px 8px 8px;
	padding: 8px;
	background-color: var(--message-color-alt);
	border-radius: calc(var(--popout-radius-big) / 1.5);

	&:before {
		display: none;
	}

	#{ $searchPopoutLearnMore },
	#{ $searchPopoutClearHistory } {
		width: 32px;
		height: 32px;
		inset-block-start: 8px;
		inset-inline-end: 4px;
		margin-block-start: -40px;
	}

	#{ $searchPopoutLearnMore } a,
	#{ $searchPopoutClearHistory } {
		display: flex;
		align-items: center;
		justify-content: center;
		color: var(--interactive-text-default);
	}
}

#{ $searchPopoutItemContainer } {
	margin: 0;
	padding: 0 8px;
	border-radius: calc(var(--popout-radius-big) / 2.5);
	text-overflow: ellipsis;
	overflow: hidden;
	transition: var(--default-time) var(--default-animation) background-color;

	strong,
	#{ $searchPopoutOptionChannelIcon },
	#{ $searchPopoutOptionChannelCategory } {
		color: var(--menu-item-text-color);
		transition: var(--default-time) var(--default-animation) color;
	}

	&:hover {
		background: var(--menu-item-select);

		strong,
		#{ $searchPopoutOptionChannelIcon },
		#{ $searchPopoutOptionChannelCategory } {
			color: var(--interactive-text-default);
		}

		#{ $searchPopoutItemFilterPill },
		#{ $searchPopoutItemAnswerPill } {
			background-color: hsl(from var(--input-pill-color) h s calc(l * 1.65));
		}
	}

	&:after {
		display: none;
	}

	&[aria-selected=true] {
		background-color: var(--menu-item-select);
		box-shadow: none;
	}

	#{ $searchPopoutFilter },
	#{ $searchPopoutNonText } {
		color: var(--interactive-text-default);
	}

	#{ $searchPopoutFilter } {
		margin-inline-start: 0;
	}

	#{ $searchPopoutAnswer } {
		color: var(--text-muted);
	}
}

#{ $searchPopoutItem } {
	padding: var(--space-4) 0;
}

#{ $searchPopoutGroupWrapper } {
    padding: 8px;
	background-color: var(--message-color-alt);
	border-radius: calc(var(--popout-radius-big) / 1.5);
}

#{ $searchPopoutGroupHeader } {
    #{ $textXsSemibold } {
        font-size: 14px;
    }
}

#{ $searchPopoutDivider } {
    margin: var(--space-4) 0;
    background-color: transparent;
}

#{ $searchPopoutItemFilterPill },
#{ $searchPopoutItemAnswerPill } {
    background-color: hsl(from var(--input-pill-color) h s calc(l * 1.3));
    color: var(--input-text-color);
	transition: var(--default-time) var(--default-animation) background-color;
}

#{ $searchPopoutItemFilterPill } {
    border-radius: 12px 0 0 12px;
}

#{ $searchPopoutItemAnswerPill } {
    border-radius: 0 12px 12px 0;
}

#{ $searchPopoutQueryContainer } {
	margin: 8px 8px 0;
	height: var(--input-height);
	line-height: var(--input-height);
	padding: 0 8px 0 12px;
	background-color: var(--input-color);
	border-radius: var(--input-radius);
	border-bottom: none;
	align-items: center;

	&:only-child {
		margin: 8px;
	}

	&#{ $searchPopoutQueryContainerFocused } {
		background-color: var(--input-color) !important;
	}

	#{ $searchPopoutQueryText } {
		@include remove-caps(14px);
	}

	#{ $keybindShortcutKey } {
		background-color: var(--input-pill-color);
	}
}

#{ $keybindShortcut } {
	height: 24px;

	#{ $keybindShortcutKey } {
		background-color: var(--menu-item-hover) !important;
		color: var(--interactive-text-default);

		&,
		&:active {
			height: 100%;
			padding: 0 6px;
			line-height: 24px;
			border-radius: 12px;
			box-shadow: none !important;
			border: none !important;
		}
	}
}

body:active #{ $searchPopout }:not(:active) {
	opacity: 0;
	transition: 150ms ease all;
}
