@use '../mixins' as *;

/*
 *
 *  BETA - VISUAL REFRESH
 *
 */

%themeDark {
    &%themeDarker {
        --text-lightness-modifier: 1.75;
        --ui-darkness-modifier: 0.55;
    }

    &%themeMidnight {
        --text-lightness-modifier: 9.8;
        --ui-darkness-modifier: 0.10;
    }
}

%visualRefresh {
    --custom-channel-textarea-text-area-height: calc(var(--main-textarea-height) - (var(--main-textarea-inner-padding) * 2));

    &%refreshFastFollowGuildBg {
        %bg {
            background: transparent;
        }

        %guildsWrapper {
            background: transparent;
        }
    }

    &%themeDark {
        --text-brand: hsl(var(--accent-hsl--material-you));
    }

    %appMount {
        background: var(--app-bg);
        background-repeat: no-repeat;
    	background-position: center;
    	background-size: cover;
    }

    %bg {
        background-color: var(--main-alt);
    }

    %bar {
        padding-left: 0;
        padding-right: var(--spacing-4);

        %barLeading {
            padding-left: var(--spacing-8);
        }

        %barTitle {
            line-height: var(--custom-app-top-bar-height);
            padding: 0 10px;
            gap: 0;

            &:before,
            &:after {
                font-size: 0.925em;
                color: var(--text-normal);
            }

            &:before {
                content: var(--app-watermark-one);
                font-weight: 700;
            }

            &:after {
                content: var(--app-watermark-two);
            }

            %barGuildIcon,
            %textSmMedium,
            svg {
                display: none;
            }
        }

        %headerBarIconBadge {
            box-shadow: 0 0 0 4px var(--main-alt);
        }
    }

	%titlebarWinButton {
        --app-title-bar-height: var(--custom-app-top-bar-height);
        width: calc(var(--app-title-bar-height) / 1.325);

		&%titlebarWinButtonMinMax {
            &:nth-of-type(1) {
				&:hover {
					&:after {
						background-color: var(--app-button-min);
					}
				}

				&:before {
					@include add-icon(var(--app-button-min), window_minimize);
				}
			}

			&:nth-of-type(2) {
				&:hover {
					&:after {
						background-color: var(--app-button-max);
					}
				}

				&:before {
					@include add-icon(var(--app-button-max), window_maximize);
				}
			}
		}
    }

    /* friends list */

    %friends {
        border-top: none;
    }

    %friendsTabBody {
        background-color: transparent;
    }

    %friendsItem {
        &:hover {
            background-color: var(--menu-item-hover);
        }

        &%friendsItemActive {
            background-color: var(--menu-item-select);
        }
    }

    /* active now */

    %activeNowOuterCard {
        background-color: var(--activity-card-color);
    }

    %activeNowCardSection {
        border: none;
    }

    /* server list */

    %guildsWrapper {
        /* CODE FOR MOVING STATUS AREA TO ORIGINAL SPOT */
        //margin-bottom: 0;
    }

    %guildExpandedFolderBackground {
        border-radius: var(--avatar-radius);
        border: none;
    }

    %guildFolderExpandedIconWrapper {
        border-radius: calc(var(--avatar-radius) / 1.2);
    }

    %guildDiscoverFooter {
        width: calc(100% - 1px);
        background-color: var(--main-alt);
    }

    /* channels and private sidebar */

    %sidebarList {
        border-top-left-radius: var(--card-radius-big);
        border-bottom-left-radius: var(--card-radius-big);
        border-top: none;
        border-left: none;
        border: none;
    }

    %privateChannels {
        background-color: var(--main-color);
    }

    %privateChannelsSearchBar {
        border-bottom:  none;
        box-shadow: var(--shadow-ledge);

        %buttonFilled%buttonPrimary {
            --button-padding: 0 16px;
            --button-background: var(--input-color);
            --button-text-color: var(--input-text-color);

            %buttonContents {
                margin: 0;
            }
        }
    }

    %privateChannel {
        &:not(%privateChannelDm) {
            %privateChannelLink {
                padding: 0 var(--spacing-16);
            }
        }
    }

    %channelsContainer {
        /* CODE FOR MOVING STATUS AREA TO ORIGINAL SPOT */
        //padding-bottom: calc(var(--custom-app-panels-height,0) + 12px);

        background-color: var(--main-color);
    }

    %channelsSidebar {
        &:after {
            display: none;
        }
    }

    %channelHasBanner {
        %channelsHeader {
            background-color: var(--chat-color);
            border-bottom: none;
        }

        &%bannerVisible {
            %channelsHeader {
                background-color: transparent;
                box-shadow: none;
            }

            %channelsHeaderGlass {
                border-radius: var(--card-radius-big) var(--card-radius-big) 0 0;
                border-bottom: none;
            }
        }
    }

    %bannerImage {
        overflow: hidden;
    }

    %channelsHeaderGuildBadge,
    %channelsHeaderGuildBadgeV2 {
        margin-right: 0;
    }

    %channelsHeaderEllipseForeground {
        position: absolute;
        height: var(--custom-channel-header-height);
        top: 0;
        left: 0;
        right: 0;
        border-radius: var(--card-radius-big);
    }

    %bannerAnimatedContainer {
        background-color: var(--chat-color);
        border-bottom: none;
    }

    %channelUserLimitWrapper {
        border: none;

        %channelUserLimitUsers {
            padding: 0 6px;
            background-color: var(--status-picker-color);
        }

        %channelUserLimitTotal {
            width: auto;
            padding: 0 6px;
            background-color: var(--sidebar-panel-color);

            &:after {
                display: none;
            }
        }
    }

    %channelLink {
        %channelContent,
        %channelLinkTop {
            min-height: inherit;
        }
    }

    %channelBar {
        padding: 6px 10px;
        background-color: var(--popout-color);
        border: none;
    }

    %channelUnreadPillBottom {
        bottom: calc(var(--custom-app-panels-height,0) + var(--spacing-12));
    }

    %panels {
        width: calc(100% - 20px);
        left: var(--spacing-12);
        bottom: var(--spacing-12);
        margin: 0;

        /* CODE FOR MOVING STATUS AREA TO ORIGINAL SPOT */
        /*width: calc(100% - 94px);
        left: 92px;
        bottom: 12px;*/

        border-radius: var(--sidebar-panel-radius-big);
        border: none;
        box-shadow: none;
        transition: var(--default-time) var(--default-animation) left;
    }

    %activityPanel {
        padding: 0 8px;
        border-radius: var(--sidebar-panel-radius-small);

        %activityPanelBody {
            height: 100%;
        }
    }

    %connectionPanel {
        margin: 0 0 2px;
        padding: 8px;
        background-color: var(--sidebar-panel-color);
        border-radius: var(--sidebar-panel-radius-small);

        %rtcConnectionStatus {
            %button {
                --button-height: 24px;
            }
        }
    }

    %accountPanel {
        min-height: unset;
        height: var(--main-textarea-height);
        margin-left: 0;
        padding: 0 var(--space-xs);
        background-color: var(--status-picker-color);
    }

    %accountPanelContent {
        min-height: 100%;
        padding: 0 8px;
    }

    /* quickswitcher */

    %quickswitcher {
        background-color: var(--popout-color);
        border: none;
        box-shadow: var(--shadow-medium);

        %quickswitcherInput {
            border: none;

            &::-webkit-input-placeholder {
                color: var(--input-placeholder-color);
            }
        }
    }

    /* collapsed sidebar */

    [data-collapsed="true"] {
        &%chatPage {
            %chat {
                border-top-left-radius: var(--card-radius-big);
                border-bottom-left-radius: var(--card-radius-big);
                border-left: none;
            }
        }

        &%channelsSidebar {
            %guildsWrapper {
                margin-bottom: calc(8px + var(--custom-app-panels-height,0));
            }

            %panels {
                width: calc(100% - var(--spacing-16));
                left: 0;
                bottom: 0;
                margin: 8px;
                border-radius: var(--sidebar-panel-radius-big);
            }

            %accountPanelAvatarWrapper {
                justify-content: center;
            }

            %spotifyPanelCoverWrapper {
                width: 44px;
                min-width: 44px;
                min-height: 44px;
            }

            %accountPanelButtons {
                display: none;
            }

            %spotifyPanelTimelineBarText {
                justify-content: center;

                :last-child {
                    display: none;
                }
            }
        }
    }

    /* chat area */

    %channelsHeader,
    %headerBar {
        border-bottom: none;
        box-shadow: var(--shadow-ledge);
    }

    %headerBar {
        padding: 0 9px 0 16px;
        border-top: none;

        &%headerBarTransparent {
            box-shadow: none;
        }
    }

    %channelsHeaderContainer {
        background-color: var(--chat-color);
    }

    %channelHasBanner {
        %channelsHeader {
            background-color: var(--chat-color);
            border-bottom: none;
        }
    }

    %summaryTopicsPillContainer {
        background-color: transparent;
        border: none;
        box-shadow: none;
    }

    %summaryTopicsPillCaret {
        background-color: hsl(var(--accent-hsl--material-you));

        &:hover {
            background-color:  hsl(var(--accent-hsl--material-you));
        }
    }

    %chat {
        background-color: var(--chat-color) !important;

        &[data-has-border=true] {
            border-top: none;
        }

        &%threadSidebarOpen {
            border-right: none;
        }
    }

    %chatNsfwScroller {
        background-color: transparent;
    }

    %barBase {
        &:not(%jumpToPresentBar) {
            left: 50%;
            right: unset;
            border: none;
            transform: translateX(-50%);

            &:hover {
                box-shadow: var(--shadow-soft);
            }
        }
    }

    %barButtonBase {
        border-radius: var(--button-radius);

        &%barButtonMain {
            padding: 0 16px;
            color: var(--accent-secondary-text-color);
        }

        &%barButtonAlt {
            padding: 0;
            background-color: hsl(var(--accent-hsl--material-you));
            color: var(--accent-text-color--material-you);
        }
    }

    %jumpToPresentBar {
        height: 56px;
        min-width: 80px;
        gap: var(--space-8);
        left: unset;
        right: var(--spacing-24);
        bottom: var(--spacing-24);
        margin: 0;
        padding: var(--spacing-16) var(--spacing-16) var(--spacing-16) var(--spacing-12);
        border-radius: calc(var(--button-radius) / 1.125);
        border: none;
        box-shadow: none;
        z-index: 3;

        &:hover {
    		box-shadow: var(--shadow-soft);
    	}

        &:active {
            margin: 0 auto !important;
        }

        &:before {
            position: relative;
            width: 24px;
    		height: 24px;
            left: unset;
            bottom: 0;
    		right: 0;
            box-sizing: border-box;
            @include add-icon(var(--accent-text-color--material-you), expand, solid);
            mask-size: 150%;
            transform: none;
        }

        %jumpToPresentBarButtonBase {
            display: none;
        }

        %button {
            --button-height: 24px;

            padding: 0;

            &:after {
                display: none;
            }
        }

        %spinner {
            width: 100%;
            left: 0;
            right: 0;
            margin: 0 auto;
            padding: 0;
        }
    }

    %chatForm {
        padding: 0;

        %channelTextArea {
            background-color: var(--main-textarea-color);
            border: none;
            box-shadow: none;

            &%channelTextAreaDisabled {
                %channelTextAreaScrollable {
                    margin-right: var(--main-textarea-inner-padding);
                    scrollbar-width: none;
                }

                %channelTextAreaInner {
                    padding-right: 0;
                }

                %textAreaSlate {
                    width: calc(100% + var(--scrollbar-width));
                    height: var(--custom-channel-textarea-text-area-height) !important;
                    margin-right: 0;
                }

                %textAreaPlaceholder {
                    line-height: var(--custom-channel-textarea-text-area-height);
                    padding: 0;
                }
            }
        }

        %channelTextAreaInner {
            padding-left: var(--main-textarea-inner-padding);
            padding-right: calc(var(--main-textarea-inner-padding));
        }

        %channelTextAreaScrollable {
            min-height: calc(var(--main-textarea-height) - (var(--main-textarea-inner-padding) * 2));
            margin: var(--main-textarea-inner-padding) 0 var(--main-textarea-inner-padding) var(--main-textarea-inner-padding);
            border-radius: calc(var(--main-textarea-radius) - var(--main-textarea-inner-padding));
        }

        %channelTextAreaAttachWrapper {
            left: calc(var(--main-textarea-inner-padding) * 2);
            margin-right: calc((32px + var(--main-textarea-inner-padding)) * -1);
            z-index: 2;
        }

        %channelTextAreaCommandIconWrapper {
            margin-left: 0;
            margin-right: calc((32px + var(--main-textarea-inner-padding)) * -1);
            z-index: 2;
        }

        %channelTextAreaCommandIcon {
            display: flex;
            width: 32px;
            height: var(--custom-channel-textarea-text-area-height);
            padding: 0;
            align-items: center;
            justify-content: center;
        }

        %textAreaSlate {
            min-height: calc(var(--main-textarea-height) - (var(--main-textarea-inner-padding) * 2));
            margin-right: var(--main-textarea-inner-padding);
            background-color: var(--main-textarea-inner-color);
            border-radius: calc(var(--main-textarea-radius) - var(--main-textarea-inner-padding));
        }

        %slateTextArea {
            min-height: calc(var(--main-textarea-height) - (var(--main-textarea-inner-padding) * 2));
            margin-left: calc((var(--main-textarea-inner-padding) * 3) + 32px);
            padding: calc(((var(--main-textarea-height) - (var(--main-textarea-inner-padding) * 2)) - var(--chat-markup-line-height)) / 2) var(--space-16) calc(((var(--main-textarea-height) - (var(--main-textarea-inner-padding) * 2)) - var(--chat-markup-line-height)) / 2) 0;
        }
    }

    %channelTextAreaButton,
    %channelAppLauncherButton,
    %spriteGreyscale {
        --interactive-normal: var(--main-textarea-button-color);
        --interactive-hover: var(--main-textarea-button-color);
        --interactive-active: var(--main-textarea-button-color);
    }

    %channelTextAreaButton,
    %channelAppLauncherButton {
        display: flex;
        min-height: var(--custom-channel-textarea-text-area-height);
        justify-content: center;
        align-items: center;
    }

    %channelTextAreaAttachButton {
        padding-right: var(--spacing-8);
    }

    %channelInfo {
        //height: 56px;
        margin: 12px 16px;
        background-color: var(--main-textarea-color);
        //border-radius: 28px;
        border: none;

        %channelInfoButtonContainer {
            //margin-right: 10px
        }
    }

    %channelBottomBarArea {
        margin: 0;
        padding: 0 16px;

        + span + %channelTextAreaTyping,
        + %channelTextAreaTyping {
            position: absolute;
            width: calc(100% - (var(--scrollbar-width) + var(--spacing-16)));
            left: unset;
            right: var(--spacing-16);
            background-color: var(--typing-color);
        }
    }

    %messagesErrorBar {
        background-color: hsl(var(--alert-hsl));
        border-radius: 22px;
        border: none;
        color: var(--alert-text-color);
        box-shadow: var(--shadow-medium);
    }

    %channelTextAreaStackedBars {
        background-color: var(--main-textarea-color);

        &:first-child {
            border-radius: var(--main-textarea-radius) var(--main-textarea-radius) 0 0;
        }

        &:not(:last-child) {
            border-bottom: none;
        }
    }

    %channelAccessoryBar {
        margin: 0 12px;
        border-top-color: var(--separator-color);
    }

    %channelAtachmentArea {
        padding: 12px;
        background-color: transparent;
    }

    %channelTextAreaUpload {
        background-color: var(--card-color-filled);
        border-radius: var(--card-radius-big);
        border: none;
        box-shadow: none;
    }

    %messageButtonWrapper {
        background-color: var(--popout-color);
        box-shadow: var(--shadow-medium) !important;
    }

    %pollContainer {
        background-color: var(--attachment-color);
        border: none;
    }

    %pollEndedContainer {
        background-color: var(--attachment-color);
        border-radius: var(--media-radius);
        border: none;
    }

    /* forward message */

    %forwardInlineContainer {
        --custom-channel-textarea-text-area-height: var(--button-height);

        background-color: transparent;
        border: none;
    }

    /* markup */

    %markup {
        %codeContainer {
            max-width: none;
        }

        pre code {
            background-color: transparent;
            border: none;
        }
    }

    %channelTextAreaInlineCode,
    %channelTextAreaInlineCodeBefore,
    %channelTextAreaInlineCodeAfter {
    	background-color: var(--attachment-color);
        border: none;
    }

    %channelTextAreaInlineCodeBefore {
    	border-radius: var(--media-radius) 0 0 var(--media-radius);
    }

    %channelTextAreaInlineCodeAfter {
    	border-radius: 0 var(--media-radius) var(--media-radius) 0;
    }

    /* chat area search */

    %chatOuterSearchContainer {
        margin-right: 0;
    }

    %chatSearch {
        --input-height: 32px;

        %chatSearchBar {
            padding: 0;
            border: none;
        }

        %chatSearchRoot {
            padding: 0 0 0 8px;
        }

        %chatSearchPlaceholder {
            height: var(--input-height);
            line-height: var(--input-height);
            padding-bottom: 0;
        }

        %chatSearchContent {
            --scrollbar-width: 0;

            padding-bottom: 0;
            line-height: var(--input-height);
        }

        %chatSearchContainer {
            height: var(--input-height);
        }

        %chatSearchFilter {
            line-height: 22px;
            border-radius: 11px 0 0 11px;
            border: none;
        }

        %chatSearchFilter + span[data-offset-key],
    	%chatSearchAnswer span[data-offset-key] {
    		height: 22px;
            line-height: 22px;
    	}

        %chatSearchAnswer,
        %chatSearchFilter {
            border: none;
        }
    }

    %searchPopout {
        border: none;
    }

    /* forum */

    %forumContainer {
        background-color: var(--chat-color);
    }

    %forumHeader {
        background-color: var(--input-color);
        border: none;
    }

    %forumHeaderMatchingPostsRow {
        background-color: var(--input-color);
        border: none;
    }

    %forumGuidelinesContainer {
        background-color: var(--card-color-filled);
        border: none;
    }

    %forumGuidelinesDescriptionContainer {
        background-color: var(--card-color-filled);
        border-radius: calc(var(--card-radius-big) / 1.4);
    }

    %postThreadStartConversationBox {
        background-color: var(--card-color-filled);

        &:after {
            border-top-color: var(--card-color-filled);
        }
    }

    %postPill {
        border: none;
    }

    %postThreadButtonContainer {
        background-color: var(--card-color-filled);
    }

    %postContainer {
        background-color: var(--card-color-filled);

        &:hover {
            background-color: var(--card-color-hover);
        }
    }

    %threadResizeHandle {
        background-color: var(--main-alt);
    }

    %threadContainer {
        background-color: var(--chat-color);
        border: none;
    }

    /* messages */

    %message {
        %channelTextArea {
            margin-bottom: 4px;
            background-color: var(--input-color-alt);
            border-radius: var(--main-textarea-radius);
            border: none;
            box-shadow: none;

            %channelTextAreaInner {
                padding-left: 0;
            }
        }

        %channelAccessoryBar {
            margin: 0 12px;
            padding: 0 4px;
            border-color: var(--separator-color);
        }
    }

    /* message reactions */

    %reaction {
        background-color: transparent;
        border-color: var(--separator-color);

        &:hover {
            background-color: var(--menu-item-hover);
            border-color: transparent;
        }

        &%reactionMe {
            background-color: hsl(var(--accent-hsl--material-you),0.2);
    		border-color: hsl(var(--accent-hsl--material-you));

    		%reactionCount {
    			color: hsl(var(--accent-hsl--material-you));
    		}
        }
    }

    /* message attachments */

    %embedFile {
        background-color: var(--attachment-color);
        border: none;
        box-shadow: none;
    }

    %threadEmbed {
        background-color: var(--attachment-color);
        border: none;
    }

    %inviteWrapper {
        border-radius: var(--media-radius);
        border: none;
    }

    %textContainer,
    %textContainerFooter {
        background-color: var(--attachment-color);
    }

    %voiceMessageContainer {
        background-color: var(--attachment-color);
        border-radius: var(--media-radius);
        border-color: var(--attachment-color);

        &%voiceMessagePlaying {
            border-color: hsl(var(--accent-hsl--material-you));
        }
    }

    /* emoji picker */

    %emojiContentWrapper {
        background-color: var(--popout-color);
        border-radius: var(--popout-radius-big);
        border: none;
        box-shadow: var(--shadow-medium);
    }

    %emojiPicker {
        background-color: var(--popout-color);
    }

    %emojiPickerNavGif,
    %emojiPickerNavSticker,
    %emojiPickerNavEmoji {
        background-color: transparent;
        border-bottom-color: var(--separator-color);

        %searchIconLayout {
            width: 32px;
            height: 32px;
        }
    }

    %emojiPickerCategoryHeaderWrapper {
        background-color: var(--emoji-category-header);
    }

    %emojiPickerInspector {
        background-color: var(--popout-color);
        border-top-color: var(--separator-color);
    }

    %emojiCategoryWrapper {
        top: 54px;
        background-color: var(--attachment-color);
    }

    %emojiPickerHasTabWrapper {
        %emojiCategoryWrapper {
            top: 50px;
        }
    }

    %emojiStandardStickerShortcut {
        background-color: var(--popout-color);
    }

    %emojiWrapperChat {
        background-color: var(--popout-color);

        %emojiCategoryWrapper {
            top: 64px;
        }
    }

    /* members list */

    %membersWrap {
        background-color: transparent;
        border-left: none;
    }

    %membersContainer {
        border-left: none;
    }

    %memberActivityContainer {
        background-color: var(--card-color-filled);
        border: none;
    }

    %member {
        max-width: 100%;
    }

    %memberInner {
        height: 100%;
    }

    /* app launcher button in main textbox */

    %channelAppLauncher {
        width: var(--space-32);
        height: auto;
        margin: 0;
        padding: 0;

        %channelAppLauncherButton {
            background-color: transparent;

            &:hover {
                background-color: transparent;
            }
        }
    }

    /* modals */

    %modalRoot {
        border: none;
    }

    /* invite accept modal */

    %acceptInviteEditProfileContainer {
        background-color: var(--card-color-filled);
        border: none;
    }

    /* search results */

    %searchResultsWrap {
        background-color: var(--main-alt);
        border: none;
    }

    %searchHeader {
        height: var(--search-header-height);
        padding: 0 16px;
        border-bottom: 1px solid var(--separator-color);
    }

    %searchResult {
        background-color: transparent;
        border: none;
    }

    %searchHeaderTabList {
        %item {
            margin: 0;
            line-height: var(--search-header-height) !important;

            &:hover {
                background-color: transparent !important;
            }

            &%itemSelected {
                background-color: transparent;
            }
        }
    }

    %searchHeaderTabList {
        %item {
            margin: 0;
        }
    }

    /* inbox */

    %messagesPopoutChannelHeader {
        background-color: var(--message-color-alt);
        border-bottom: none;
    }

    %recentMentionsMessagesContainer {
        border: none;
    }

    /* pinned messages popout */

    %messagesPopoutWrap {
        background-color: var(--popout-color);
    }

    %messagesPopoutHeader {
        background-color: transparent;
        border-bottom: none;
    }

    %messagesPopoutContentContainer {
        background-color: transparent;
    }

    %messagesPopoutRow {
        &:hover {
            background-color: var(--menu-item-hover);
        }
    }

    %recentMentionsPopout {
        background-color: var(--popout-color);
    }

    %recentMentionsHeaderTabs {
        margin: 0 -24px;

        %messagesPopoutTabBar {
            padding: 0 16px;
        }
    }

    %unreadMessages {
        background-color: var(--message-color-alt);
        border: none;
    }

    /* threads popouts */

    %threadsPopoutContainer {
        background-color: var(--popout-color);
    }

    %threadsPopoutHeader {
        background-color: transparent;
        border-bottom: none;
    }

    /* user profile */

    %userProfileOuter {
        %channelTextArea {
            border-radius: var(--main-textarea-radius);
            border: none;
        }
    }

    %userProfileFooter {
        %forwardInlineContainer {
            background-color: var(--input-color);
        }
    }

    /* inputs */

    %copyInput {
        border: none;
    }

    /* search bar */

    %searchContainer {
        border: none;
    }

    /* select menus */

    %selectMenu {
        min-height: var(--input-height);

        &%selectMenuFilled {
            border: none;
        }
    }

    /* switch */

    %switchContainer {
        &:before {
            left: 0;
        }

        &%switchContainerChecked {
            %switchSlider {
                transform: translate(5px, -50%);
            }
        }

        %switchSlider {
            transform: translate(8px, -50%);
        }
    }

    /* radio button */

    %radioItem {
        border-radius: calc(var(--card-radius-big) / 1.65);
        transition: var(--default-time) var(--default-animation) background-color, var(--default-time) var(--default-animation) color;

        %radioBar {
            &:after {
                top: 0;
            }
        }
    }

    %radioItem,
    %menuPopoutItem[role="menuitemradio"] {
        &[aria-checked="false"] {
            %radioIndicatorGroup {
                background-color: var(--interactive-normal);
                -webkit-mask-image: url(https://capnkitten.github.io/BetterDiscord/Themes/Material-Discord/files/icons/outline/radio_button_unchecked.svg);
            }
        }

        &[aria-checked="true"] {
            %radioIndicatorGroup {
                background-color: hsl(var(--accent-hsl--material-you));
                -webkit-mask-image: url(https://capnkitten.github.io/BetterDiscord/Themes/Material-Discord/files/icons/outline/radio_button_checked.svg);
            }
        }
    }

    %menuPopoutItem[role="menuitemradio"] {
        %radioIndicatorGroup {
            width: 20px;
            height: 20px;
        }
    }

    %radioIndicatorGroup {
        width: 24px;
        height: 24px;
        background-repeat: no-repeat;
        background-position: center;
        -webkit-mask-repeat: no-repeat;
        mask-size: 100%;

        %radioIndicator {
            display: none;
        }
    }

    /* tooltips */

    %tooltip {
        border: none;
    }

    /* toast */

    %newToast {
        padding: 0 16px;
        background-color: var(--tooltip-color);
        border-radius: 20px;
        border: none;
        box-shadow: none;
        color: var(--tooltip-text-color);
    }

    /* tab bar */

    %tabBar {
        %item {
            margin: 0;

            &:after {
                display: none;
            }

            &%itemSelected {
                &:after {
                    display: block;
                    top: unset;
                }
            }
        }
    }

    /* context menu */

    %menuPopout {
        border: none;

        %menuPopoutLabel {
            color: inherit;
        }
    }

    %contextMenuQuickReaction {
        border-radius: 50%;
    }

    /* settings */

    %standardSidebarView,
    %settingsContentRegion {
        background-color: var(--main-alt);
    }

    %settingsContentScroller {
        background-color: var(--main-color);
        border-radius: var(--card-radius-big) var(--card-radius-big) 0 var(--card-radius-big);
    }

    %settingsSidebar {
    	%settingsSide {
    		> div:not([class])[style="margin-bottom: 8px;"] {
                top: 0;
            }
        }
    }

    /* settings sidebar */

    %settingsSidebarScroller {
        background-color: var(--main-alt);
    }

    %settingsSidebar {
        %triggerSettingsSearchBox {
            background-color: var(--input-color);
            border-radius: var(--input-radius);
            border: none;
        }
    }

    /* settings family center */

    %familyCenterBox {
        background-color: var(--card-color-filled);
        border: none;
    }

    %familyCenterFeatureCardCircle,
    %familyCenterSeeRowIconContainer,
    %familyCenterBoxStepNumber {
        background-color: var(--card-button-color);
        border: none;
    }

    %familyCenterSeeRow {
        border: none;
    }

    /* settings keybinds */

    %keybindWarningCard {
        border-radius: var(--card-radius-big);
    }

    %keybindRecorderContainer {
        min-height: 0;
        background-color: transparent;
        border: none;
    }

    /* server settings audit log */

    %auditLogList {
        gap: 0;
    }

    %auditLog {
        background-color: var(--card-color-filled);
        border-radius: 0;

        &:first-of-type {
            border-top-left-radius: var(--card-radius-big);
            border-top-right-radius: var(--card-radius-big);
        }

        &:last-of-type {
            border-bottom-left-radius: var(--card-radius-big);
            border-bottom-right-radius: var(--card-radius-big);
        }
    }

    /* voice/video chat */

    %callWrapper {
        background-color: var(--chat-color);
    }

    %callGradientContainer {
        border-radius: calc(var(--card-radius-big) / 1.5);
    }

    /* channels & roles */

    %pageBodyHeader,
    %chatContentWrapper {
        background-color: transparent !important;
    }

    %chatContentWrapper {
        %channelsAndRolesTabBar {
            margin: 32px 46px 0 16px;
        }
    }

    %channelsAndRolesContainer {
        %channelsAndRolesScroller {
            padding-left: 16px;
        }
    }

    %pageBody {
        padding: 0;
        background-color: transparent;
    }

    %browseChannelsHeader {
        margin: 0 46px 0 16px;
    }

    %browseChannelsScrollerInner {
        padding: 0 36px 32px 16px;
    }

    %browseChannelsChannelRow {
        background-color: var(--card-color-filled);
        border: none;

        &:hover:not(%browseChannelsChannelDisabled) {
            background-color: var(--card-color-filled);
        }
    }

    %channelsAndRolesPrompt {
        background-color: var(--card-color-filled);
        border: none;
    }

    %promptOptionButtonWrapper {
        background-color: var(--card-color-alt);
        border: none;

        &:hover {
            background-color: var(--card-color-hover);
        }

        &%promptOptionButtonWrapperSelected {
            background-color: var(--card-color-active);
        }
    }

    /* members tab */

    %membersPageMainTableContainer {
        background-color: transparent;
        border: none;
    }

    /* discover */

    %discoverSidebar {
        background-color: var(--chat-color);
    }

    %discoverSidebarHeader {
        border-bottom: none;
        box-shadow: var(--shadow-ledge);
    }

    %discoverSidebarHeader,
    %discoverHeaderBar {
        height: 48px;
    }

    %discoverContentContainer {
        border-top: none;
    }

    %discoverSidebarNavItem {
        padding: var(--space-sm);
    }

    %discoverHeaderBarTabsContainer {
        height: inherit;

        %tabs {
            height: inherit;
            border-bottom: none;
        }
    }

    %discoverScroller {
        background-color: var(--chat-color);
    }

    /* discover apps */

    %appCard {
        border: none !important;
    }

    /* discover quests */

    %questsHeaderContainer {
        %discoverHeaderBar {
            height: 48px;
        }
    }

    %questCardsContainer {
        padding: 24px 32px;
    }

    %questCard {
        border: none;
    }

    %questCardContentContainer {
        background-color: var(--card-color-filled);

        %questCardRewardDescriptionContainer {
            background-color: transparent;
        }

        %questCardFooterContainer {
            border-top: none;
        }
    }

    /* server access */

    %severAccessRulesContainer {
        %channelTextArea {
            background-color: transparent;
            border: none;
            box-shadow: none;
        }
    }

    /* server boost */

    %serverBoostStatusCard {
        border-radius: var(--card-radius-big);
    }

    /* stickers */

    %stickersTier {
        border: none;
        box-shadow: none;
    }

    /* image viewer */

    %imageViewerActionButtons {
        background-color: var(--popout-color);
    }

    %imageViewerCloseButton {
        background-color: var(--popout-color);

        %imageViewerCloseButtonInner {
            border: none;
        }
    }

    /* shop */

    %shopOuterContainer {
        background-color: var(--chat-color);
    }

    %chatPage {
        %shopOuterContainer,
        %shopPageWrapper {
            background-color: transparent;
            border-top: none;
        }

        %shopContainer {
            background-color: var(--chat-color);
        }
    }

    %shopContainer {
        background-color: transparent;
    }

    %shopFullscreen {
        margin-top: 0;
        background: var(--main-alt);
    }

    %shopCard {
        border: none;
    }

    /* create poll */

    %pollCreateQuestionInput {
        min-height: var(--input-height);
        max-height: calc(var(--input-height) * 5);
        line-height: var(--input-height);
        padding: var(--input-padding) !important;
        border: none;
    }

    %pollCreateDefaultTextInputWrapper {
        border: none !important;
    }

    %pollCreateAddAnswerButton {
        background-color: var(--button-background);
        border-radius: var(--button-radius);

        &:hover {
            background-color: var(--button-background);
        }
    }

    /* ui density */

    &%densityDefault {
        --main-textarea-height: 48px;

        %guildsWrapper {
            %button {
                margin: 0 8px;
            }
        }

        %privateChannel {
            &:not(%privateChannelDm) {
                %privateChannelLink {
                    height: 42px;
                }
            }
        }

        [data-collapsed="true"] {
            &%channelsSidebar {
                %spotifyPanel {
                    &%spotifyPanelWithTimeline {
                        padding-top: 6px;
                    }
                }
            }
        }

        %privateChannels {
            --channel-radius: 22px;
        }

        %channelLink {
            min-height: 34px;
        }

        %spotifyPanel {
            &%spotifyPanelWithTimeline {
                padding-top: 2px;

                %spotifyPanelTimeline {
                    margin: 2px 0;
                }
            }
        }

        %activityPanel {
            height: 46px;
        }

        %channelInfo {
            height: 48px;
            border-radius: 24px;

            %channelInfoButtonContainer {
                margin-right: 6px
            }
        }

        %privateChannels,
        %members {
            --channel-radius: 21px;
        }

        %members {
            %listItem {
                height: 42px;
            }
        }

        %settingsSidebar {
            %item {
                height: 32px;
            }
        }

        %searchHeader {
            --search-header-height: 48px;
        }

        %discoverSidebarNavItem {
            border-radius: 24px;
        }
    }

    &%densityCozy {
        --main-textarea-height: 54px;

        %privateChannel {
            &:not(%privateChannelDm) {
                %privateChannelLink {
                    height: 48px;
                }
            }
        }

        [data-collapsed="true"] {
            &%channelsSidebar {
                %spotifyPanel {
                    &%spotifyPanelWithTimeline {
                        padding-top: 8px;
                    }
                }
            }
        }

        %channelLink {
            min-height: 38px;
        }

        %spotifyPanel {
            &%spotifyPanelWithTimeline {
                padding-top: 4px;

                &%spotifyPanelMaximized {
                    padding-top: 0;
                }

                %spotifyPanelTimeline {
                    margin: 6px 0 4px 0;
                }
            }
        }

        %vencordSpotifyPlayer {
            margin-bottom: 2px;
        }

        %activityPanel {
            height: 54px;
        }

        %channelInfo {
            height: 56px;
            border-radius: 28px;

            %channelInfoButtonContainer {
                margin-right: 10px
            }
        }

        %privateChannels,
        %members {
            --channel-radius: 24px;
        }

        %members {
            %listItem {
                height: 48px;
            }
        }

        %settingsSidebar {
            %item {
                height: 40px;
                line-height: 40px;
            }
        }

        %searchHeader {
            --search-header-height: 56px;
        }

        %discoverSidebarNavItem {
            border-radius: 28px;
        }
    }

    &%densityCompact {
        --main-textarea-height: 42px;

        %guildsWrapper {
            %button {
                margin: 0 4px;
            }
        }

        %privateChannel {
            &:not(%privateChannelDm) {
                %privateChannelLink {
                    height: 38px;
                }
            }
        }

        [data-collapsed="true"] {
            &%channelsSidebar {
                %spotifyPanel {
                    &%spotifyPanelWithTimeline {
                        padding-top: 6px;
                    }
                }
            }
        }

        %privateChannels {
            --channel-radius: 19px;
        }

        %channelLink {
            min-height: 30px;
        }

        %spotifyPanel {
            &%spotifyPanelWithTimeline {
                padding-top: 2px;

                %spotifyPanelTimeline {
                    margin: 2px 0;
                }
            }
        }

        %activityPanel {
            height: 42px;
        }

        %channelInfo {
            height: 48px;
            border-radius: 24px;

            %channelInfoButtonContainer {
                margin-right: 6px
            }
        }

        %privateChannels,
        %members {
            --channel-radius: 20px;
        }

        %members {
            %listItem {
                height: 40px;
            }
        }

        %settingsSidebar {
            %item {
                height: 28px;
                line-height: 28px;
            }
        }

        %searchHeader {
            --search-header-height: 42px;
        }

        %discoverSidebarNavItem {
            border-radius: 22px;
        }
    }
}
